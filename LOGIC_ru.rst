Описание алгоритма
==================

Особенности
-----------

- сначала выкачивает СПП для артикулов и сообщает об изменениях, потом — обрабатывает параметры подкатегорий;
- категории и подкатегории можно задавать как текстом, так и по ID;
- поиск по названию производится с учётом другого окончания, сколько символов может не совпадать на конце — задаётся
  в настройках;
- категорию можно не задавать, тогда он ищет в глобальном списке всех подкатегорий;
- если для каких-то параметром не находит ни одного соответствия — выкачивает из Wildberries обновлённый список всех
  категорий и для соответствующих категорий выкачивает обновлённый список подкатегорий;
- если найдено несколько соответствий — берёт в работу все варианты, если их немного, и мониторит независимо;
- если найдено слишком много соответствий — отклоняет этот параметр целиком и отправляет сообщение админам;
- если изменения СПП для какого-то конкретного артикула или ценового диапазона только что поменялось, то отчёт об
  этом изменении не отправляется;
- то же самое с отчётами админам — отчёты об ошибках с одной и той же сущностью отправляются не чаще, чем
  задано в настройках;
- если отчёт об изменениях СПП не удалось отправить кому-то из пользователей — посылает отчёт админам;
- если отчёт об изменениях СПП не удалось вообще никому отправить, то отменяет все изменения в базе, чтобы после
  исправления этого глюка не потерять изменения в СПП.

Логика определения СПП
----------------------

На примере: Украшения и декорации, Гирлянда, 300, 5000, 500
- вычисляет коэффициент уменьшения из шага и максимальной цены — 500/5000 = 10%
- берёт максимальную цену — 5000;
- отсчитывает вниз коэффициент (10%);
- выкачивает несколько страниц со списком артикулов поиском по диапазону с 4500 (5000-10%) до 5000;
- кол-во страниц задаётся в параметрах, обычно одной страницы достаточно, (на каждой — по 100 артикулов);
- раскладывает полученные артикулы по соответствующим ценовым промежуткам, в данном случае это: 300, 800, 1300, 1800,
  2300, 2800, 3300, 3800, 4300, 4800, 5000;
- отсчитывает вниз коэффициент ещё раз 4500 - 10% = 4050, выкачивает несколько страниц в диапазоне с 4050 по 4500, и
  раскладывает по исходной цене;
- и т.д., пока верхняя граница фильтра не станет меньше, чем минимальная цена минус максимальная предполагаемая
  суммарная скидка; в данном случае — 300 минус 90% = 30;
- соответственно, последний поиск по цене будет в диапазоне с 27 до 30;
- после того, как все артикулы выкачаны, скрипт смотрит в каждый ценовой диапазон;
- если там недостаточно артикулов для определения СПП (задаётся в настройках), то посылает админам отчёт;
- если артикулов достаточно, то выкачивает по каждому СПП;
- если одинаковое СПП больше, чем заданное кол-во процентов, то СПП определён, иначе — сообщение админам.
